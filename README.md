## Разбиение на микросервисы для приложения обработки заказов зуботехнической лаборатории

### Пользовательские сценарии 
Пользовательские сценарии представлены как _features_ описанные на _Gherkin_: 
* [прием и обработка заказов](user-story/order-processing.feature)
* [отслеживание статуса заказа](user-story/order-status-tracking.feature)
* [cоздание и управление заданиями на производство в лаборатории](user-story/lab-tasks.feature)

### Схема взаимодейсвтия сервисов
![Схема взаимодействия сервисов](arch-diagrams/dental_lab_order_managment.svg)

### Описание сервисов и контрактов взаимодействия
* ___Receiving and processing order service___ - сервис отвечает за прием заказов от клиентов, их обработку и сохранение в базе данных.
  - `GET: api/v1/order` - получить список заказов пользователя
  - `GET: api/v1/order/{orderId}` - получить заказ по _id_
  - `POST: api/v1/order` - создать заказ с описанием его деталей и отправкой в облако прикрепленных файлов
  - `PUT: api/v1/order` - редактировать детали заказа
* ___Order status tracking service___ - сервис отслеживает статусы заказов в реальном времени, позволяя клиентам и персоналу лаборатории получать актуальную информацию о текущем состоянии заказа. При обновлении статуса отправляется сообщение в брокер
  - `GET: api/v1/order-status?orderId={orderId}` - получить статус заказа
  - `PUT: api/v1/order-status` - обновить статус заказа
* ___Laboratory tasks service___ - сервис cоздает задания на производство для заказа, в результате в зависимости от деталей заказа ему будет присвоен определенный путь заданий. Также этот сервис назначает на каждое задание сотрудников
  - `POST: api/v1/task` - создать задания для заказа (в _request body_ передается _orderId_ и информация о смене статуса)
* ___Laboratory staff service___ - сервис позволяет по типу задания получить список подходящих сотрудников
  - `GET: api/v1/employee?taskType={taskType}` - получить список сотрудников по типу задания
* ___Notification service___ - данный сервис слушает брокер и при получении сообщения отправляет соответствующее уведомление пользователю
